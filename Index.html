<!DOCTYP<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>BlueHomes - Imóveis</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{background:#f8fafc;color:#0a2a52;}
input,textarea,select{border:1px solid #cbd5e1;padding:10px;border-radius:8px;width:100%;font-size:14px;}
input:focus,textarea:focus,select:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.1);}
.modal-bg{background:rgba(0,0,0,0.7);}
img{object-fit:cover;}
.video-container{position:relative;padding-bottom:56.25%;height:0;border-radius:8px;overflow:hidden;}
.video-container video{position:absolute;top:0;left:0;width:100%;height:100%;}
.btn-primary{background:#2563eb;color:white;padding:10px 16px;border-radius:8px;font-weight:500;transition:all 0.2s;}
.btn-primary:hover{background:#1d4ed8;}
.btn-secondary{background:#6b7280;color:white;padding:10px 16px;border-radius:8px;font-weight:500;transition:all 0.2s;}
.btn-secondary:hover{background:#4b5563;}
.card-shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px -1px rgba(0,0,0,0.1);}
.card-shadow:hover{box-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -4px rgba(0,0,0,0.1);}
</style>
</head>
<body>

<div id="app" class="min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white p-4 flex justify-between items-center shadow-lg">
    <div class="flex items-center space-x-2">
        <i class="fas fa-home text-2xl"></i>
        <h1 class="font-bold text-xl">BlueHomes</h1>
    </div>
    <button @click="menu=!menu" class="p-2 hover:bg-blue-700 rounded-lg transition">
        <i class="fa-solid fa-bars text-xl"></i>
    </button>
</header>

<!-- MENU LATERAL -->
<div v-if="menu" class="fixed inset-0 z-50" @click="menu=false">
    <div class="absolute top-14 right-3 bg-white rounded-xl shadow-2xl p-4 w-64 animate-fadeIn">
        <div class="space-y-1">
            <button @click="irPara('home')" class="flex items-center w-full text-left p-3 hover:bg-blue-50 rounded-lg">
                <i class="fas fa-home text-blue-600 mr-3 w-5"></i>
                <span>Início</span>
            </button>
            <button @click="irPara('filtros')" class="flex items-center w-full text-left p-3 hover:bg-blue-50 rounded-lg">
                <i class="fas fa-filter text-blue-600 mr-3 w-5"></i>
                <span>Filtros</span>
            </button>
            <button @click="modalAnunciar=true;menu=false" class="flex items-center w-full text-left p-3 hover:bg-blue-50 rounded-lg">
                <i class="fas fa-plus-circle text-green-600 mr-3 w-5"></i>
                <span>Anunciar imóvel</span>
            </button>
            <div class="border-t my-2"></div>
            <button v-if="!admin" @click="irPara('login')" class="flex items-center w-full text-left p-3 hover:bg-blue-50 rounded-lg">
                <i class="fas fa-lock text-blue-600 mr-3 w-5"></i>
                <span>Área Admin</span>
            </button>
            <button v-if="admin" @click="irPara('admin')" class="flex items-center w-full text-left p-3 hover:bg-blue-50 rounded-lg">
                <i class="fas fa-chart-line text-green-600 mr-3 w-5"></i>
                <span>Painel Admin</span>
            </button>
            <button v-if="admin" @click="sair()" class="flex items-center w-full text-left p-3 hover:bg-red-50 rounded-lg text-red-600">
                <i class="fas fa-sign-out-alt mr-3 w-5"></i>
                <span>Sair</span>
            </button>
        </div>
    </div>
</div>

<!-- MODAL ANUNCIAR (Com campo de WhatsApp) -->
<div v-if="modalAnunciar" class="fixed inset-0 modal-bg flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full animate-popIn">
        <div class="text-center mb-6">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-home text-3xl text-green-600"></i>
            </div>
            <h2 class="text-2xl font-bold mb-2">Anunciar Seu Imóvel</h2>
            <p class="text-gray-600">Preencha os dados para cadastrar</p>
        </div>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                    <i class="fas fa-phone-alt text-green-600 mr-1"></i>
                    Seu WhatsApp (Vendedor/Proprietário)
                </label>
                <div class="flex">
                    <span class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                        +55
                    </span>
                    <input type="tel" 
                           v-model="novoAnuncio.whatsappVendedor" 
                           placeholder="84 99161-2793" 
                           class="flex-1 rounded-r-md">
                </div>
                <p class="text-xs text-gray-500 mt-1">Este número receberá os contatos</p>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                    <i class="fas fa-user text-blue-600 mr-1"></i>
                    Seu Nome
                </label>
                <input type="text" 
                       v-model="novoAnuncio.nomeVendedor" 
                       placeholder="João Silva">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                    <i class="fas fa-home text-orange-600 mr-1"></i>
                    Tipo do Imóvel
                </label>
                <select v-model="novoAnuncio.tipo" class="w-full">
                    <option value="casa">Casa</option>
                    <option value="apartamento">Apartamento</option>
                    <option value="terreno">Terreno</option>
                    <option value="comercial">Comercial</option>
                </select>
            </div>
            
            <div class="pt-4 space-y-3">
                <button @click="abrirWhatsAppAnuncio" class="btn-primary w-full py-3">
                    <i class="fab fa-whatsapp mr-2"></i>Prosseguir no WhatsApp
                </button>
                <button @click="modalAnunciar=false" class="btn-secondary w-full">
                    Cancelar
                </button>
            </div>
            
            <div class="mt-6 pt-4 border-t border-gray-200 text-xs text-gray-500">
                <p><i class="fas fa-info-circle mr-1"></i>Você será redirecionado para o WhatsApp para enviar fotos e detalhes</p>
            </div>
        </div>
    </div>
</div>

<!-- HOME -->
<div v-if="view==='home'" class="flex-1 p-4">
    <div class="max-w-6xl mx-auto">
        <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-8">
            <div>
                <h1 class="text-2xl font-bold text-gray-900">Imóveis Disponíveis</h1>
                <p class="text-gray-600">Encontre o lar perfeito para você</p>
            </div>
            <div class="flex items-center space-x-3 mt-4 sm:mt-0">
                <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium">
                    {{ imoveis.length }} imóveis
                </span>
                <button @click="modalAnunciar=true" class="px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:shadow-lg transition">
                    <i class="fas fa-plus mr-2"></i>Anunciar Imóvel
                </button>
            </div>
        </div>

        <!-- Grade de imóveis -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div v-for="imovel in imoveis" :key="imovel.id" 
                 class="bg-white rounded-xl card-shadow overflow-hidden border border-gray-100 hover:border-blue-300 transition-all duration-300">
                
                <!-- Imagem principal -->
                <div class="relative h-56 bg-gradient-to-br from-blue-50 to-gray-100">
                    <img v-if="imovel.fotos && imovel.fotos[0]" 
                         :src="imovel.fotos[0]" 
                         class="w-full h-full object-cover">
                    <div v-else class="w-full h-full flex items-center justify-center">
                        <i class="fas fa-home text-5xl text-blue-200"></i>
                    </div>
                    
                    <!-- Badge do tipo -->
                    <div class="absolute top-3 left-3">
                        <span :class="[
                            'px-3 py-1 text-xs font-bold rounded-full shadow',
                            imovel.tipo === 'venda' ? 'bg-red-500 text-white' :
                            imovel.tipo === 'aluguel' ? 'bg-green-500 text-white' :
                            imovel.tipo === 'temporada' ? 'bg-purple-500 text-white' :
                            'bg-yellow-500 text-white'
                        ]">
                            {{ getTipoLabel(imovel.tipo) }}
                        </span>
                    </div>
                </div>
                
                <!-- Informações -->
                <div class="p-4">
                    <h3 class="font-bold text-lg text-gray-900 mb-1">{{ imovel.titulo }}</h3>
                    <p class="text-gray-600 text-sm mb-3">
                        <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                        {{ imovel.cidade }} - {{ imovel.bairro }}
                    </p>
                    
                    <!-- Características -->
                    <div class="flex space-x-4 mb-4">
                        <div class="text-center">
                            <div class="font-bold text-gray-800">{{ imovel.quartos || 0 }}</div>
                            <div class="text-xs text-gray-500">Quartos</div>
                        </div>
                        <div class="text-center">
                            <div class="font-bold text-gray-800">{{ imovel.banheiros || 0 }}</div>
                            <div class="text-xs text-gray-500">Banheiros</div>
                        </div>
                        <div class="text-center">
                            <div class="font-bold text-gray-800">{{ imovel.vagas || 0 }}</div>
                            <div class="text-xs text-gray-500">Vagas</div>
                        </div>
                    </div>
                    
                    <!-- Valor -->
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <div class="text-sm text-gray-500">Valor</div>
                            <div class="font-bold text-xl text-green-700">
                                R$ {{ formatarValor(imovel.valor) }}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Botão WhatsApp Duplo -->
                    <button @click="abrirWhatsAppDuplo(imovel)" 
                            class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-lg font-bold hover:shadow-lg transition flex items-center justify-center">
                        <i class="fab fa-whatsapp mr-2 text-xl"></i>
                        Falar no WhatsApp
                    </button>
                    
                    <!-- WhatsApp do Proprietário -->
                    <div v-if="imovel.whatsappProprietario" class="mt-3 text-center">
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-phone-alt mr-1"></i>
                            Proprietário: {{ formatarTelefone(imovel.whatsappProprietario) }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- DETALHES DO IMÓVEL -->
<div v-if="imovelSelecionado" class="fixed inset-0 modal-bg flex justify-center items-start p-4 z-50 overflow-y-auto">
    <div class="bg-white rounded-xl max-w-2xl w-full my-8">
        <!-- Cabeçalho -->
        <div class="sticky top-0 bg-white border-b p-6 flex justify-between items-center">
            <h2 class="font-bold text-2xl text-gray-900">{{ imovelSelecionado.titulo }}</h2>
            <button @click="imovelSelecionado = null" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-2xl"></i>
            </button>
        </div>
        
        <!-- Conteúdo -->
        <div class="p-6">
            <!-- Carrossel de fotos -->
            <div v-if="imovelSelecionado.fotos && imovelSelecionado.fotos.length > 0" class="mb-6">
                <img :src="imovelSelecionado.fotos[0]" class="w-full h-96 object-cover rounded-xl mb-4">
            </div>
            
            <!-- Informações -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <div class="text-sm text-gray-600">Cidade</div>
                    <div class="font-bold text-lg">{{ imovelSelecionado.cidade }}</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <div class="text-sm text-gray-600">Bairro</div>
                    <div class="font-bold text-lg">{{ imovelSelecionado.bairro }}</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <div class="text-sm text-gray-600">Tipo</div>
                    <div class="font-bold text-lg">{{ getTipoLabel(imovelSelecionado.tipo) }}</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <div class="text-sm text-gray-600">Área</div>
                    <div class="font-bold text-lg">{{ imovelSelecionado.area || '0' }} m²</div>
                </div>
            </div>
            
            <!-- Características -->
            <div class="flex justify-around bg-gray-100 p-6 rounded-xl mb-6">
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-700">{{ imovelSelecionado.quartos || 0 }}</div>
                    <div class="text-sm text-gray-600">Quartos</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-700">{{ imovelSelecionado.banheiros || 0 }}</div>
                    <div class="text-sm text-gray-600">Banheiros</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-700">{{ imovelSelecionado.vagas || 0 }}</div>
                    <div class="text-sm text-gray-600">Vagas</div>
                </div>
            </div>
            
            <!-- Valor -->
            <div class="bg-green-50 p-6 rounded-xl mb-6">
                <div class="text-lg font-bold text-green-800 mb-2">Valor do Imóvel</div>
                <div class="font-bold text-3xl text-green-700">
                    R$ {{ formatarValor(imovelSelecionado.valor) }}
                </div>
                <div v-if="imovelSelecionado.condominio" class="mt-2">
                    <span class="text-gray-600">Condomínio: </span>
                    <span class="font-bold">R$ {{ formatarValor(imovelSelecionado.condominio) }}</span>
                </div>
            </div>
            
            <!-- Descrição -->
            <div class="mb-8">
                <h3 class="font-bold text-xl mb-3">Descrição</h3>
                <p class="text-gray-700 whitespace-pre-line">{{ imovelSelecionado.descricao || 'Sem descrição' }}</p>
            </div>
            
            <!-- WhatsApp Duplo - MENSAGEM PARA AMBOS -->
            <div class="space-y-4">
                <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4">
                    <h4 class="font-bold text-yellow-800 mb-2">
                        <i class="fas fa-info-circle mr-2"></i>
                        Como funciona o contato
                    </h4>
                    <p class="text-sm text-yellow-700">
                        Ao clicar no botão abaixo, uma mensagem será enviada para <strong>DOIS números</strong>:
                    </p>
                    <ul class="text-sm text-yellow-700 mt-2 space-y-1">
                        <li><i class="fas fa-check-circle mr-2"></i>Para o proprietário (anunciante)</li>
                        <li><i class="fas fa-check-circle mr-2"></i>Para você (interessado)</li>
                    </ul>
                </div>
                
                <!-- Formulário do Interessado -->
                <div class="bg-blue-50 rounded-xl p-4">
                    <h4 class="font-bold text-blue-800 mb-3">Seus dados para contato</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">
                                Seu Nome <span class="text-red-500">*</span>
                            </label>
                            <input type="text" 
                                   v-model="dadosInteressado.nome" 
                                   placeholder="Digite seu nome"
                                   class="w-full">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">
                                Seu WhatsApp <span class="text-red-500">*</span>
                            </label>
                            <div class="flex">
                                <span class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                                    +55
                                </span>
                                <input type="tel" 
                                       v-model="dadosInteressado.whatsapp" 
                                       placeholder="84 99999-9999"
                                       class="flex-1 rounded-r-md">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">
                                Mensagem adicional (opcional)
                            </label>
                            <textarea v-model="dadosInteressado.mensagem" 
                                      placeholder="Ex: Gostaria de agendar uma visita..."
                                      rows="2"
                                      class="w-full"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- Botão WhatsApp Duplo -->
                <button @click="enviarWhatsAppDuplo" 
                        :disabled="!dadosInteressado.nome || !dadosInteressado.whatsapp"
                        class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl text-lg font-bold hover:shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="fab fa-whatsapp mr-2 text-xl"></i>
                    ENVIAR MENSAGEM PARA AMBOS
                </button>
                
                <!-- WhatsApp do Proprietário -->
                <div v-if="imovelSelecionado.whatsappProprietario" class="text-center">
                    <p class="text-sm text-gray-600">
                        <i class="fas fa-phone-alt mr-1"></i>
                        Proprietário: {{ formatarTelefone(imovelSelecionado.whatsappProprietario) }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

</div>

<script>
const app = Vue.createApp({
    data() {
        return {
            // Navegação
            view: 'home',
            menu: false,
            admin: false,
            
            // Modais
            modalAnunciar: false,
            imovelSelecionado: null,
            
            // Dados do novo anúncio
            novoAnuncio: {
                whatsappVendedor: '84991612793',
                nomeVendedor: '',
                tipo: 'casa'
            },
            
            // Dados do interessado
            dadosInteressado: {
                nome: '',
                whatsapp: '',
                mensagem: ''
            },
            
            // Imóveis na memória
            imoveis: [
                {
                    id: 1,
                    titulo: "Casa com 3 quartos na praia",
                    cidade: "Natal",
                    bairro: "Ponta Negra",
                    tipo: "venda",
                    valor: "450000",
                    quartos: 3,
                    banheiros: 2,
                    vagas: 2,
                    area: "120",
                    condominio: "250",
                    descricao: "Linda casa a 200m da praia de Ponta Negra. Totalmente reformada, com piscina e jardim.",
                    fotos: ["https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=400"],
                    whatsappProprietario: "84991612793",
                    nomeProprietario: "João Silva"
                },
                {
                    id: 2,
                    titulo: "Apartamento moderno centro",
                    cidade: "João Pessoa",
                    bairro: "Centro",
                    tipo: "aluguel",
                    valor: "1800",
                    quartos: 2,
                    banheiros: 1,
                    vagas: 1,
                    area: "65",
                    condominio: "350",
                    descricao: "Apartamento novo no centro da cidade. Próximo a tudo: bancos, mercados, farmácias.",
                    fotos: ["https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=400"],
                    whatsappProprietario: "84999998888",
                    nomeProprietario: "Maria Santos"
                }
            ]
        }
    },
    
    computed: {
        // Filtros ativos
        temFiltrosAtivos() {
            return false; // Simplificado para este exemplo
        }
    },
    
    methods: {
        // Navegação
        irPara(pagina) {
            this.menu = false;
            this.view = pagina;
        },
        
        // WhatsApp Duplo - Funcionalidade PRINCIPAL
        abrirWhatsAppDuplo(imovel) {
            this.imovelSelecionado = imovel;
            this.dadosInteressado = {
                nome: '',
                whatsapp: '',
                mensagem: ''
            };
        },
        
        enviarWhatsAppDuplo() {
            if (!this.dadosInteressado.nome || !this.dadosInteressado.whatsapp) {
                alert('Por favor, preencha seu nome e WhatsApp!');
                return;
            }
            
            const imovel = this.imovelSelecionado;
            
            // Mensagem padrão
            let mensagem = `*INTERESSE EM IMÓVEL - BlueHomes*%0A%0A`;
            
            // Informações do imóvel
            mensagem += `*Imóvel:* ${imovel.titulo}%0A`;
            mensagem += `*Local:* ${imovel.cidade} - ${imovel.bairro}%0A`;
            mensagem += `*Tipo:* ${this.getTipoLabel(imovel.tipo)}%0A`;
            mensagem += `*Valor:* R$ ${this.formatarValor(imovel.valor)}%0A`;
            mensagem += `*Quartos:* ${imovel.quartos || 0}%0A`;
            mensagem += `*Banheiros:* ${imovel.banheiros || 0}%0A`;
            mensagem += `*Vagas:* ${imovel.vagas || 0}%0A`;
            mensagem += `*Área:* ${imovel.area || '0'} m²%0A%0A`;
            
            // Informações do interessado
            mensagem += `*DADOS DO INTERESSADO*%0A`;
            mensagem += `*Nome:* ${this.dadosInteressado.nome}%0A`;
            mensagem += `*WhatsApp:* ${this.formatarTelefone(this.dadosInteressado.whatsapp)}%0A`;
            
            if (this.dadosInteressado.mensagem) {
                mensagem += `*Mensagem:* ${this.dadosInteressado.mensagem}%0A`;
            }
            
            mensagem += `%0A---%0A`;
            mensagem += `*Esta mensagem foi enviada automaticamente pelo site BlueHomes*`;
            
            // 1. Abrir WhatsApp para o PROPRIETÁRIO
            const whatsappProprietario = this.limparTelefone(imovel.whatsappProprietario || '84991612793');
            window.open(`https://wa.me/55${whatsappProprietario}?text=${mensagem}`, '_blank');
            
            // 2. Abrir WhatsApp para o INTERESSADO (cliente)
            const whatsappInteressado = this.limparTelefone(this.dadosInteressado.whatsapp);
            
            // Mensagem para o interessado (um pouco diferente)
            let mensagemInteressado = `*CONFIRMAÇÃO DE INTERESSE - BlueHomes*%0A%0A`;
            mensagemInteressado += `Olá ${this.dadosInteressado.nome},%0A%0A`;
            mensagemInteressado += `Seu interesse no imóvel *${imovel.titulo}* foi registrado!%0A%0A`;
            mensagemInteressado += `*Detalhes do imóvel:*%0A`;
            mensagemInteressado += `- Local: ${imovel.cidade} - ${imovel.bairro}%0A`;
            mensagemInteressado += `- Valor: R$ ${this.formatarValor(imovel.valor)}%0A`;
            mensagemInteressado += `- Contato do proprietário: ${this.formatarTelefone(imovel.whatsappProprietario)}%0A%0A`;
            mensagemInteressado += `O proprietário *${imovel.nomeProprietario || 'João Silva'}* já foi notificado e entrará em contato em breve.%0A%0A`;
            mensagemInteressado += `*BlueHomes - Conectando você ao seu novo lar!*`;
            
            // Pequeno delay para abrir a segunda janela
            setTimeout(() => {
                window.open(`https://wa.me/55${whatsappInteressado}?text=${mensagemInteressado}`, '_blank');
            }, 500);
            
            // Fechar modal após envio
            setTimeout(() => {
                this.imovelSelecionado = null;
                alert('Mensagem enviada para o proprietário e para você! Verifique seu WhatsApp.');
            }, 1000);
        },
        
        // Anunciar novo imóvel
        abrirWhatsAppAnuncio() {
            if (!this.novoAnuncio.whatsappVendedor) {
                alert('Por favor, informe seu WhatsApp!');
                return;
            }
            
            let mensagem = `*NOVO ANÚNCIO - BlueHomes*%0A%0A`;
            mensagem += `Olá! Gostaria de anunciar um imóvel.%0A%0A`;
            mensagem += `*Meus dados:*%0A`;
            mensagem += `- Nome: ${this.novoAnuncio.nomeVendedor || 'Não informado'}%0A`;
            mensagem += `- WhatsApp: ${this.formatarTelefone(this.novoAnuncio.whatsappVendedor)}%0A`;
            mensagem += `- Tipo do imóvel: ${this.novoAnuncio.tipo}%0A%0A`;
            mensagem += `*Por favor, me envie:*%0A`;
            mensagem += `1. Fotos do imóvel (até 10)%0A`;
            mensagem += `2. Vídeo (opcional)%0A`;
            mensagem += `3. Descrição completa%0A`;
            mensagem += `4. Valor%0A`;
            mensagem += `5. Endereço%0A%0A`;
            mensagem += `*Obrigado!*%0A`;
            mensagem += `_Sistema BlueHomes_`;
            
            const telefoneLimpo = this.limparTelefone(this.novoAnuncio.whatsappVendedor);
            window.open(`https://wa.me/55${telefoneLimpo}?text=${mensagem}`, '_blank');
            
            this.modalAnunciar = false;
            this.novoAnuncio = {
                whatsappVendedor: '84991612793',
                nomeVendedor: '',
                tipo: 'casa'
            };
        },
        
        // Utilitários
        limparTelefone(telefone) {
            return telefone.replace(/\D/g, '');
        },
        
        formatarTelefone(telefone) {
            const tel = this.limparTelefone(telefone);
            if (tel.length === 11) {
                return `(${tel.substring(0, 2)}) ${tel.substring(2, 7)}-${tel.substring(7)}`;
            } else if (tel.length === 10) {
                return `(${tel.substring(0, 2)}) ${tel.substring(2, 6)}-${tel.substring(6)}`;
            }
            return tel;
        },
        
        formatarValor(valor) {
            if (!valor) return '0,00';
            return parseFloat(valor).toLocaleString('pt-BR', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        },
        
        getTipoLabel(tipo) {
            const labels = {
                'venda': 'Venda',
                'aluguel': 'Aluguel',
                'temporada': 'Temporada',
                'diaria': 'Diária',
                'casa': 'Casa',
                'apartamento': 'Apartamento',
                'terreno': 'Terreno',
                'comercial': 'Comercial'
            };
            return labels[tipo] || tipo;
        },
        
        // Autenticação (simplificada)
        logar() {
            // Simples para exemplo
            this.admin = true;
            this.view = 'admin';
        },
        
        sair() {
            this.admin = false;
            this.view = 'home';
        },
        
        cancelarCadastro() {
            this.view = 'home';
        }
    },
    
    mounted() {
        console.log('Sistema BlueHomes carregado!');
        console.log(`${this.imoveis.length} imóveis disponíveis`);
        
        // Restaurar dados do sessionStorage se existirem
        try {
            const saved = sessionStorage.getItem('bluehomes_imoveis');
            if (saved) {
                this.imoveis = JSON.parse(saved);
                console.log('Dados restaurados do sessionStorage');
            }
        } catch (e) {
            console.log('Usando dados padrão');
        }
        
        // Auto-save a cada 30 segundos
        setInterval(() => {
            sessionStorage.setItem('bluehomes_imoveis', JSON.stringify(this.imoveis));
        }, 30000);
    }
});

app.mount('#app');
</script>

</body>
</html>
